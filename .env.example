# ggen-mcp Environment Configuration Example
# Copy this file to .env and adjust values as needed

# ========================================
# Application Configuration
# ========================================

# Environment (development, staging, production)
ENVIRONMENT=development

# Workspace directory for spreadsheets
SPREADSHEET_MCP_WORKSPACE=./data

# MCP Server transport (stdio, http)
SPREADSHEET_MCP_TRANSPORT=http

# HTTP server bind address (when transport=http)
SPREADSHEET_MCP_HTTP_BIND=127.0.0.1:8079

# ========================================
# Feature Flags
# ========================================

# Enable recalculation features
SPREADSHEET_MCP_RECALC_ENABLED=true

# Enable VBA macro support
SPREADSHEET_MCP_VBA_ENABLED=true

# Enable screenshot generation
SPREADSHEET_MCP_SCREENSHOT_ENABLED=false

# ========================================
# Logging Configuration
# ========================================

# Log format: json (production) or pretty (development)
# - json: Structured JSON output for log aggregation
# - pretty: Human-readable colored output for development
LOG_FORMAT=pretty

# Log output destination: stdout, stderr, or file
# - stdout: Standard output (for containerized environments)
# - stderr: Standard error (default, doesn't mix with application output)
# - file: Write to rotating log files in LOG_DIR
LOG_OUTPUT=stderr

# Log directory (when LOG_OUTPUT=file)
LOG_DIR=./logs

# Rust log level filter
# Examples:
#   - info: Show INFO, WARN, and ERROR logs
#   - debug: Show DEBUG and above
#   - trace: Show all logs (very verbose)
#   - spreadsheet_mcp=debug,hyper=info: Module-specific levels
RUST_LOG=debug,hyper=info,tower=info

# ========================================
# OpenTelemetry Configuration
# ========================================

# Enable OpenTelemetry tracing
# Set this to any value to enable, or leave unset to disable
# ENABLE_OTEL=true

# OTLP endpoint for trace export
# Common endpoints:
#   - Jaeger: http://localhost:4317
#   - Tempo: http://localhost:4317
#   - Honeycomb: https://api.honeycomb.io:443
#   - New Relic: https://otlp.nr-data.net:4317
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317

# OpenTelemetry service name
OTEL_SERVICE_NAME=ggen-mcp

# OpenTelemetry environment tag
OTEL_ENVIRONMENT=development

# Trace sampling rate (0.0 to 1.0)
# - 1.0: Sample all traces (100%, recommended for development)
# - 0.1: Sample 10% of traces (recommended for production)
# - 0.01: Sample 1% of traces (high-volume production)
OTEL_SAMPLING_RATE=1.0

# OTLP export timeout in seconds
OTEL_EXPORTER_OTLP_TIMEOUT=10

# ========================================
# Performance Configuration
# ========================================

# Cache size for workbook metadata (number of entries)
CACHE_SIZE=100

# Cache TTL in seconds
CACHE_TTL=300

# Maximum concurrent operations
MAX_CONCURRENT_OPERATIONS=10

# ========================================
# Security Configuration
# ========================================

# Maximum file size for uploads (in bytes)
MAX_FILE_SIZE=104857600  # 100MB

# Allowed file extensions (comma-separated)
ALLOWED_EXTENSIONS=.xlsx,.xlsm,.xls,.ods

# Enable path traversal protection
ENABLE_PATH_PROTECTION=true

# ========================================
# Docker Recalculation Configuration
# ========================================

# Docker image for LibreOffice recalculation
DOCKER_IMAGE=libreoffice/online:master

# Docker network mode (bridge, host, none)
DOCKER_NETWORK_MODE=bridge

# Docker timeout in seconds
DOCKER_TIMEOUT=300

# Maximum concurrent Docker containers
DOCKER_MAX_CONTAINERS=5

# ========================================
# Health Check Configuration
# ========================================

# Enable health check endpoints
ENABLE_HEALTH_CHECKS=true

# Health check interval in seconds
HEALTH_CHECK_INTERVAL=30

# ========================================
# Metrics Configuration
# ========================================

# Enable Prometheus metrics
ENABLE_METRICS=true

# Metrics endpoint path
METRICS_PATH=/metrics

# Metrics port (if different from main server)
# METRICS_PORT=9090

# ========================================
# Development-Specific Configuration
# ========================================

# Example development configuration
# Uncomment these for local development

# ENVIRONMENT=development
# LOG_FORMAT=pretty
# LOG_OUTPUT=stderr
# RUST_LOG=debug,spreadsheet_mcp=trace
# OTEL_SAMPLING_RATE=1.0

# ========================================
# Production-Specific Configuration
# ========================================

# Example production configuration
# Uncomment these for production deployment

# ENVIRONMENT=production
# LOG_FORMAT=json
# LOG_OUTPUT=file
# LOG_DIR=/var/log/ggen-mcp
# RUST_LOG=info,spreadsheet_mcp=debug
# OTEL_EXPORTER_OTLP_ENDPOINT=http://tempo:4317
# OTEL_SAMPLING_RATE=0.1
# ENABLE_METRICS=true
# ENABLE_HEALTH_CHECKS=true

# ========================================
# Cloud Provider Specific
# ========================================

# AWS Configuration
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your_access_key
# AWS_SECRET_ACCESS_KEY=your_secret_key

# GCP Configuration
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/credentials.json
# GCP_PROJECT_ID=your-project-id

# Azure Configuration
# AZURE_TENANT_ID=your-tenant-id
# AZURE_CLIENT_ID=your-client-id
# AZURE_CLIENT_SECRET=your-client-secret

# ========================================
# Observability Stack (for docker-compose)
# ========================================

# Grafana credentials
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=admin

# Prometheus retention
PROMETHEUS_RETENTION=15d

# Loki retention
LOKI_RETENTION=30d

# ========================================
# Advanced Configuration
# ========================================

# Thread pool size (defaults to number of CPU cores)
# TOKIO_WORKER_THREADS=4

# Enable debug assertions (development only)
# RUST_BACKTRACE=1

# Enable panic backtraces
# RUST_BACKTRACE=full

# Memory allocator (jemalloc, system)
# MALLOC=jemalloc
