@prefix : <http://example.org/ontology#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix mcp: <http://modelcontextprotocol.io/ontology#> .

# User Aggregate Definition
:User a rdfs:Class ;
    rdfs:label "User" ;
    rdfs:comment "A user in the system" ;
    :hasProperty :userId, :username, :email, :fullName, :createdAt .

:userId a rdf:Property ;
    rdfs:label "user_id" ;
    rdfs:domain :User ;
    rdfs:range xsd:string ;
    :required true .

:username a rdf:Property ;
    rdfs:label "username" ;
    rdfs:domain :User ;
    rdfs:range xsd:string ;
    :required true ;
    :unique true .

:email a rdf:Property ;
    rdfs:label "email" ;
    rdfs:domain :User ;
    rdfs:range xsd:string ;
    :required true ;
    :unique true ;
    :format "email" .

:fullName a rdf:Property ;
    rdfs:label "full_name" ;
    rdfs:domain :User ;
    rdfs:range xsd:string ;
    :required false .

:createdAt a rdf:Property ;
    rdfs:label "created_at" ;
    rdfs:domain :User ;
    rdfs:range xsd:dateTime ;
    :required true ;
    :default "now" .

# MCP Tool Definition
:CreateUserTool a mcp:Tool ;
    mcp:name "create_user" ;
    mcp:description "Create a new user in the system" ;
    mcp:inputSchema [
        a mcp:Schema ;
        mcp:type "object" ;
        mcp:properties [
            mcp:username [ mcp:type "string" ; mcp:required true ] ;
            mcp:email [ mcp:type "string" ; mcp:format "email" ; mcp:required true ] ;
            mcp:fullName [ mcp:type "string" ; mcp:required false ]
        ]
    ] ;
    mcp:outputSchema [
        a mcp:Schema ;
        mcp:type "object" ;
        mcp:properties [
            mcp:userId [ mcp:type "string" ] ;
            mcp:username [ mcp:type "string" ] ;
            mcp:email [ mcp:type "string" ] ;
            mcp:createdAt [ mcp:type "string" ; mcp:format "date-time" ]
        ]
    ] .

# Events
:UserCreatedEvent a :Event ;
    rdfs:label "user_created" ;
    :aggregate :User ;
    :payload [
        :userId xsd:string ;
        :username xsd:string ;
        :timestamp xsd:dateTime
    ] .
